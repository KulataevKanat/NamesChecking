# Интеграция проверки пола по имени в Django Rest Framework

Этот проект представляет собой простую интеграцию Django Rest Framework с Bitrix24 и PostgreSQL для проверки пола по
имени контакта и обновления информации в Bitrix24.

## Установка

1. Создайте виртуальное окружение и активируйте его;

2. Установите зависимости:

    ```
    pip install -r requirements.txt
    ```

3. Примените миграции:

    ```
    python manage.py migrate
    ```

## Настройка

1. Настройте файл `pg_config.json` в соответствии с вашей базой данных PostgreSQL:

2. Настройте файл `bitrix_data.py` в соответствии с вашими данными Bitrix24.

3. Запустите сервер:

    ```
    python manage.py runserver
    ```

## Используемые методы из Bitrix24

Для взаимодействия с Bitrix24 используется Webhook. В коде проекта используются следующие методы:

- `crm.contact.list`: Получение информации о контактах.
- `crm.contact.update`: Обновление информации о контакте.
- `crm.contact.userfield.get`: Получение информации, по ID, о пользовательских полях контактов.

## Использование

1. Создайте данные контакта в вашей базе данных PostgreSQL в соответствии с данными Bitrix24 методами `POST`.

2. Как вариант, воспользуйтесь [Swagger UI](http://127.0.0.1:8000/swagger/) после запуска сервера.

3. Используйте API `GET /api/contacts/find_all/` для получения данных контактов из Bitrix24.

4. API `GET /api/contacts/update_gender/` проверит имя контакта в базе данных и обновит информацию в Bitrix24, установив пол контакта в зависимости от
   результата проверки.